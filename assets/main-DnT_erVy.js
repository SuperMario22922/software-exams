import{r as u,j as e,I as _,f as C,a as w,c as I}from"./percentages-BXMCSKIN-iclHem3a.js";const N={cssa_familiarisation:"data/cssa_familiarisation.json",nsb:"data/nsb.json",cssa_trial:"data/cssa_trial.json",girraween:"data/girraween.json",hsc_familiarisation:"data/hsc_familiarisation.json",hsc_sample_exam:"data/hsc_sample_exam.json",independent:"data/independent.json",doe_sample_exam:"data/doe_sample.json",normanhurst:"data/normanhurst.json"};function L(){const[r,t]=u.useState(null),[a,s]=u.useState([]),[n,i]=u.useState(""),[x,o]=u.useState(!1),[l,g]=u.useState(!1);return u.useEffect(()=>{const m=new URLSearchParams(window.location.search).get("exam");t(m)},[]),u.useEffect(()=>{if(r){if(!N[r]){i(`❌ Unknown exam: ${r}`);return}o(!0),i(""),fetch(N[r]).then(d=>d.json()).then(d=>s(d)).catch(()=>i("Failed to load questions.")).finally(()=>o(!1))}},[r]),e.jsxs("div",{className:"container mx-auto p-6",children:[e.jsxs("header",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl font-bold text-gray-900",children:"Software Engineering Assessments"}),!r&&e.jsx("p",{className:"text-gray-600 mt-2",children:"Choose a test to begin"}),r&&e.jsxs("div",{className:"mt-4 space-x-4",children:[e.jsx("a",{href:"/",className:"text-indigo-600 hover:underline inline-block",children:"← Back to exams"}),e.jsx("a",{href:`/answers/${r}_answers.pdf`,target:"_blank",rel:"noreferrer",className:"text-rose-600 hover:underline inline-block",children:"View Answers document"}),e.jsx("button",{onClick:()=>g(!l),className:`
              px-4 py-2 rounded-md font-medium transition-colors duration-200 shadow-sm
              ${l?"bg-red-100 text-red-800 hover:bg-red-200":"bg-green-100 text-green-800 hover:bg-green-200"}
            `,children:l?"Hide Answers":"Show Answers"})]})]}),e.jsxs("main",{children:[!r&&e.jsx(T,{}),r&&x&&e.jsx("div",{className:"text-gray-600",children:"Loading questions…"}),r&&n&&e.jsx("div",{className:"text-red-600",children:n}),r&&!x&&!n&&e.jsx(k,{exam:r,questions:a,showAnswers:l})]})]})}function T(){const r=[{id:"cssa_familiarisation",title:"CSSA Familiarisation",desc:"Practice familiarisation questions for the CSSA Software Engineering exam."},{id:"cssa_trial",title:"CSSA Trial Exam",desc:"CSSA Trial Software Engineering exam."},{id:"independent",title:"Independent Trial Exam",desc:"Independent Trial Exam for Software Engineering."},{id:"hsc_familiarisation",title:"HSC Familiarisation Questions",desc:"HSC Software Engineering familiarisation questions."},{id:"hsc_sample_exam",title:"HSC Sample Exam",desc:"HSC Software Engineering sample exam questions."},{id:"doe_sample_exam",title:"Department of Education Sample Exam",desc:"Department of Education (DoE) Sample Exam for some state schools."},{id:"girraween",title:"Girraween Exam",desc:"Girraween High School Software Engineering exam. Partially adapted from independent exam."},{id:"nsb",title:"NSB Exam",desc:"North Sydney Boys High School Software Engineering exam."},{id:"normanhurst",title:"Normanhurst Trial Exam",desc:"Normanhurst Boys High School Trial Exam for Software Engineering. Partially adapted from Department of Education and Independent exam."}];return e.jsx("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:r.map(t=>e.jsxs("a",{href:`?exam=${t.id}`,className:"block bg-white p-6 rounded-lg shadow-md hover:shadow-lg transition border border-gray-200",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:t.title}),e.jsx("p",{className:"text-gray-600 mt-2",children:t.desc})]},t.id))})}function k({exam:r,questions:t,showAnswers:a}){return e.jsxs("div",{children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("h2",{className:"text-2xl font-semibold text-gray-800 mb-2",children:["Exam: ",r.replace(/_/g," ").toUpperCase()]}),e.jsx("p",{className:"text-gray-600",children:"Please answer the following questions:"})]}),e.jsx("div",{className:"space-y-8",children:t.map((s,n)=>e.jsx(P,{data:s,showAnswers:a},s.id||n))})]})}function P({data:r,showAnswers:t}){return r?.parts?.length?e.jsx("div",{className:"bg-white p-6 rounded-lg shadow-md border border-gray-200",children:r.parts.map((a,s)=>e.jsx(M,{qid:r.id,part:a,stimulus:r.stimulusContentItemCollection,showAnswers:t},s))}):null}function M({qid:r,part:t,stimulus:a,showAnswers:s}){const n=t?.metadata?.mark;return e.jsxs("div",{className:"mb-8 last:mb-0",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:t?.title||"Untitled"}),typeof n<"u"&&e.jsxs("span",{className:"bg-indigo-100 text-indigo-800 text-sm font-medium px-3 py-1 rounded-full",children:[n," ",n===1?"mark":"marks"]})]}),e.jsx(R,{stimulus:a,qid:r}),e.jsx("div",{className:"question-content prose max-w-none text-gray-800",children:t?.content?.contentItemCollection?.items?.map((i,x)=>e.jsx("div",{dangerouslySetInnerHTML:{__html:i.text}},x))}),e.jsx("div",{className:"mt-4",children:e.jsx($,{qid:r,params:t?.answer?.parameters,marks:n,showAnswers:s,markingCriteria:t?.markingCriteriaContentItem?.criteria,sampleAnswer:t?.sampleAnswerContentItem})})]})}function R({stimulus:r,qid:t}){const a=r?.items||[];return a.length?e.jsx("div",{className:"stimulus bg-gray-50 p-4 rounded-md mb-4 border border-gray-200 space-y-4",children:a.map((s,n)=>s.type==="RICH_TEXT"?e.jsx("div",{className:"prose max-w-none",dangerouslySetInnerHTML:{__html:s.text}},n):s.type==="IMAGE_SLIDER"&&s.files?e.jsx(H,{files:s.files,sliderId:`slider-${t}-${n}`},n):s.type==="IMAGE"&&s.files?e.jsx("div",{className:"space-y-2",children:s.files.map((i,x)=>e.jsx("img",{src:i.url,alt:`Slide ${x+1}`,className:"w-full h-auto rounded-lg",onError:o=>{o.currentTarget.src="https://placehold.co/600x400/e2e8f0/4a5568?text=Image+Not+Found"}},x))},n):null)}):null}function H({files:r,sliderId:t}){const[a,s]=u.useState(0),n=r.length,i=x=>s(o=>(o+x+n)%n);return e.jsxs("div",{className:"relative",id:t,children:[e.jsxs("div",{className:"relative",children:[r.map((x,o)=>e.jsx("div",{className:o===a?"":"hidden",children:e.jsx("img",{src:x.url,alt:`Slide ${o+1}`,className:"w-full h-auto rounded-lg",onError:l=>{l.currentTarget.src="https://placehold.co/600x400/e2e8f0/4a5568?text=Image+Not+Found"}})},o)),e.jsx("button",{type:"button",className:"slider-arrow prev absolute left-2 top-1/2 -translate-y-1/2 px-3 py-1 bg-white/80 rounded shadow",onClick:()=>i(-1),children:"❮"}),e.jsx("button",{type:"button",className:"slider-arrow next absolute right-2 top-1/2 -translate-y-1/2 px-3 py-1 bg-white/80 rounded shadow",onClick:()=>i(1),children:"❯"})]}),e.jsx("div",{className:"flex justify-center space-x-2 mt-4",children:r.map((x,o)=>e.jsx("button",{type:"button",className:`w-3 h-3 rounded-full ${o===a?"bg-gray-800":"bg-gray-300"}`,onClick:()=>s(o),"aria-label":`Go to slide ${o+1}`},o))})]})}function $({qid:r,params:t,marks:a,showAnswers:s,markingCriteria:n=null,sampleAnswer:i=null}){if(!t)return null;switch(t.type){case"MULTI_CHOICE":return e.jsx(O,{qid:r,params:t,showAnswers:s});case"SHORT":return e.jsx(D,{mark:a,showAnswers:s,markingCriteria:n,sampleAnswer:i});case"OBJECTIVE_RESPONSE":return e.jsx(q,{params:t,qid:r,showAnswers:s});case"SORTING_TABLE":return e.jsx(B,{rows:t.rows,qid:r,showAnswers:s,markingCriteria:n,sampleAnswer:i});case"CODING":return e.jsx(Q,{defaultCode:t.defaultCode,showAnswers:s,markingCriteria:n,sampleAnswer:i});case"PSEUDOCODE":return e.jsx(A,{defaultCode:t.defaultCode,showAnswers:s,markingCriteria:n,sampleAnswer:i});case"SQL":return e.jsx(G,{defaultSQL:t.defaultCode,datasetSetupQuery:t.datasetSetupQuery,showAnswers:s,markingCriteria:n,sampleAnswer:i});case"DRAWING_V2":return e.jsx(U,{showAnswers:s,markingCriteria:n,sampleAnswer:i});default:return e.jsxs("em",{className:"text-gray-500",children:["(Unsupported answer type: ",t.type,")"]})}}function O({qid:r,params:t,showAnswers:a}){const[s,n]=u.useState([]),i=t?.settings?.multipleCorrectOptions,x=i?"checkbox":"radio",o=`question-${r}`,l=u.useMemo(()=>t?.correctOptions?t.correctOptions.map(d=>t.options.findIndex(m=>m.id===d)):t?.correctOptionsIndices||[],[t]),g=d=>{n(i?m=>m.includes(d)?m.filter(c=>c!==d):[...m,d]:[d])};return e.jsx("div",{className:"mt-4 space-y-3",children:t.options?.map((d,m)=>{const c=l.includes(m),h=s.includes(m),p=a&&h&&!c,f=`
          flex items-center p-3 rounded-md border border-gray-200 hover:bg-gray-50 transition
          ${a&&c?"!border-2 !border-[#a0e6ba] !bg-[#f4fcf7]":""}
          ${p?"!border-2 !border-[#f8b4b4] !bg-[#fdecec]":""}
        `;return e.jsxs("label",{className:f.trim(),children:[e.jsx("input",{type:x,name:o,className:"h-4 w-4 text-indigo-600 border-gray-300 focus:ring-indigo-500",onChange:()=>g(m),checked:h}),e.jsx("span",{className:"ml-3 text-gray-700",dangerouslySetInnerHTML:{__html:d.text}}),a&&c&&e.jsx("span",{className:"flex-grow text-right font-bold text-green-800",children:"Correct"}),p&&e.jsx("span",{className:"flex-grow text-right font-bold text-red-800",children:"Incorrect"})]},m)})})}function D({mark:r,showAnswers:t,markingCriteria:a=null,sampleAnswer:s=null}){return e.jsxs(e.Fragment,{children:[e.jsx("textarea",{className:"w-full p-2 border border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500",rows:1+1.5*r,placeholder:"Your answer here..."}),t&&e.jsx(S,{markingCriteria:a,sampleAnswer:s})]})}function q({params:r,qid:t,showAnswers:a}){const[s,n]=u.useState({}),i=r?.correctCellIds||[],x=(o,l)=>{n(g=>({...g,[o]:l}))};return e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse border border-gray-300",children:[e.jsx("thead",{children:e.jsx("tr",{className:"bg-gray-100",children:r.header?.map((o,l)=>e.jsx("th",{className:"p-2 border border-gray-300 text-center",dangerouslySetInnerHTML:{__html:o.text}},l))})}),e.jsx("tbody",{children:r.rows?.map((o,l)=>e.jsx("tr",{className:"hover:bg-gray-50 transition-colors",children:o.cells?.map((g,d)=>{if(d===0)return e.jsx("td",{className:"p-2 border border-gray-300 font-medium",children:e.jsx("span",{dangerouslySetInnerHTML:{__html:g.text}})},d);const m=i.includes(g.id),c=s[l]===d,p=`
                  p-2 border border-gray-300 text-center transition
                  ${a&&m?"!border-2 !border-[#a0e6ba] !bg-[#f4fcf7]":""}
                  ${a&&c&&!m?"!border-2 !border-[#f8b4b4] !bg-[#fdecec]":""}
                `;return e.jsx("td",{className:p.trim(),children:e.jsx("input",{type:"radio",name:`row-${t}-${l}`,className:"h-4 w-4 text-indigo-600 border-gray-300 focus:ring-indigo-500",onChange:()=>x(l,d),checked:c})},d)})},l))})]})})}function B({rows:r=[],qid:t,showAnswers:a,markingCriteria:s,sampleAnswer:n}){const[i,x]=u.useState(()=>r.map(c=>c.cells?.[0]?.text||"")),o=u.useRef(),l=u.useRef(),g=c=>o.current=c,d=c=>l.current=c,m=()=>{const c=[...i],h=c[o.current];c.splice(o.current,1),c.splice(l.current,0,h),o.current=null,l.current=null,x(c)};return e.jsxs("div",{children:[e.jsx("ul",{className:"sortable-list border border-gray-300 rounded-md p-2 space-y-2 bg-gray-50",children:i.map((c,h)=>e.jsx("li",{className:"p-3 bg-white border border-gray-200 rounded-md shadow-sm cursor-move sortable-item",draggable:!0,onDragStart:()=>g(h),onDragEnter:()=>d(h),onDragEnd:m,children:e.jsx("span",{dangerouslySetInnerHTML:{__html:c}})},h))}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Drag and drop to reorder the items."}),a&&e.jsx("div",{className:"mt-4",children:e.jsx(S,{markingCriteria:s,sampleAnswer:n})})]})}function Q({defaultCode:r,showAnswers:t,markingCriteria:a,sampleAnswer:s}){const[n,i]=u.useState(r||"# Write your Python code here"),[x,o]=u.useState(""),[l,g]=u.useState(null),[d,m]=u.useState(!0),[c,h]=u.useState(!1);u.useEffect(()=>{async function b(){if(window.pyodideInstance){g(window.pyodideInstance),m(!1);return}try{const y=await window.loadPyodide({indexURL:"pyodide/"});window.pyodideInstance=y,g(y)}catch(y){console.error("Error loading Pyodide:",y),o(`❌ Error setting up Python environment: ${y}`)}finally{m(!1)}}b()},[]);const p=async()=>{if(!l)return;h(!0),o("⏳ Running...");const b=5e3,y=(async()=>(await l.runPythonAsync(`
        import sys, builtins
        from js import prompt
        class OutputCatcher:
            def __init__(self): self.data = ""
            def write(self, s): self.data += str(s)
            def flush(self): pass
        catcher = OutputCatcher()
        sys.stdout = catcher
        sys.stderr = catcher
        def custom_input(prompt_text=""):
            return prompt(str(prompt_text))
        builtins.input = custom_input
      `),await l.runPythonAsync(n),l.globals.get("catcher").data))(),v=new Promise((j,E)=>setTimeout(()=>E(new Error("Timeout")),b));try{const j=await Promise.race([y,v]);o(j||"(no output)")}catch(j){j.message==="Timeout"?o("❌ Error: Code execution timed out after 1 second."):o(`❌ Error: ${j}`)}finally{h(!1)}},f=d||c;return e.jsxs("div",{children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"w-full p-1 border border-gray-600 rounded-md bg-gray-900",children:e.jsx(w,{height:"20rem",language:"python",theme:"vs-dark",defaultValue:n,onChange:b=>i(b||""),options:{minimap:{enabled:!1},fontSize:14,wordWrap:"on",scrollBeyondLastLine:!1}})}),e.jsx("button",{onClick:p,disabled:f,className:"px-4 py-2 bg-indigo-600 text-white rounded-md shadow hover:bg-indigo-700 disabled:opacity-60",children:d?"Loading Python...":c?"Running...":"Run Code"}),e.jsx("pre",{className:"w-full p-4 bg-gray-100 rounded-md text-sm text-gray-800 whitespace-pre-wrap overflow-x-auto",children:x})]}),t&&e.jsx(S,{markingCriteria:a,sampleAnswer:s})]})}function G({defaultSQL:r,datasetSetupQuery:t,showAnswers:a,markingCriteria:s,sampleAnswer:n}){const[i,x]=u.useState(r||`-- Write your SQL query here...
`),[o,l]=u.useState(""),[g,d]=u.useState(!1),m=u.useRef(null);u.useEffect(()=>{let h=!1;return(async()=>{try{const p=await window.initSqlJs({locateFile:b=>`https://cdnjs.cloudflare.com/ajax/libs/sql.js/1.10.2/${b}`}),f=new p.Database;if(t)try{f.run(t)}catch(b){console.error("Dataset setup failed:",b)}h||(m.current=f,d(!0))}catch(p){console.error(p)}})(),()=>{h=!0,m.current=null}},[t]);const c=()=>{if(m.current)try{const h=m.current.exec(i);if(!h.length){l("(no output)");return}const p=h[0];let f="<table class='border border-gray-300 bg-white'><thead><tr>";p.columns.forEach(b=>{f+=`<th class="border border-gray-300 px-2 py-1 bg-gray-100">${b}</th>`}),f+="</tr></thead><tbody>",p.values.forEach(b=>{f+="<tr>",b.forEach(y=>{f+=`<td class="border border-gray-300 px-2 py-1">${y}</td>`}),f+="</tr>"}),f+="</tbody></table>",l(f)}catch(h){l("❌ Error: "+h)}};return e.jsxs("div",{children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("textarea",{value:i,onChange:h=>x(h.target.value),className:"w-full p-4 border-gray-600 rounded-md bg-gray-900 text-white font-mono text-sm",rows:10}),e.jsx("button",{onClick:c,disabled:!g,className:"px-4 py-2 bg-green-600 text-white rounded-md shadow hover:bg-green-700 disabled:opacity-60",children:g?"Run SQL":"Loading SQL engine…"}),e.jsx("div",{className:"overflow-x-auto w-full p-4 bg-gray-100 rounded-md text-sm text-gray-800",children:e.jsx("div",{dangerouslySetInnerHTML:{__html:o}})})]}),a&&e.jsx(S,{markingCriteria:s,sampleAnswer:n})]})}function U({showAnswers:r,markingCriteria:t,sampleAnswer:a}){return e.jsxs("div",{children:[e.jsx("div",{className:"mt-4",style:{height:"600px",width:"100%"},children:e.jsx(_,{children:e.jsx(C,{})})}),r&&e.jsx(S,{markingCriteria:t,sampleAnswer:a})]})}function A({defaultCode:r,showAnswers:t,markingCriteria:a,sampleAnswer:s}){return e.jsxs("div",{children:[e.jsx(w,{height:"300px",defaultLanguage:"plaintext",defaultValue:r||"// Write your pseudocode here...",theme:"vs-dark",options:{fontSize:14,minimap:{enabled:!1},scrollBeyondLastLine:!1}}),t&&e.jsx(S,{markingCriteria:a,sampleAnswer:s})]})}function S({markingCriteria:r=null,sampleAnswer:t=null}){const a=r&&r.length>0,s=t?.text;return!a&&!s?e.jsx("div",{className:"p-4 bg-gray-100 border border-gray-300 rounded-md",children:e.jsx("p",{className:"text-gray-600",children:"No marking criteria or sample answer available."})}):e.jsxs("div",{className:"marking-guide mt-4 p-4 bg-red-50 border border-red-400 rounded-lg space-y-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-red-800 mb-2",children:"Marking Guide"}),a&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Marking Criteria"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse border border-gray-300 bg-white text-base",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-200",children:[e.jsx("th",{className:"p-3 border border-gray-300 text-left font-medium text-gray-700",children:"Criterion"}),e.jsx("th",{className:"p-3 border border-gray-300 text-center font-medium text-gray-700 w-28",children:"Marks"})]})}),e.jsx("tbody",{children:r.map((n,i)=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"p-3 border border-gray-300 align-top prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:n.criterion}}),e.jsx("td",{className:"p-3 border border-gray-300 align-middle text-center",dangerouslySetInnerHTML:{__html:n.point}})]},i))})]})})]}),s&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Sample Answer"}),e.jsx("div",{className:"prose max-w-none p-4 bg-white border border-gray-200 rounded-md",dangerouslySetInnerHTML:{__html:t.text}})]})]})}I.createRoot(document.getElementById("root")).render(e.jsx(u.StrictMode,{children:e.jsx(L,{})}));
